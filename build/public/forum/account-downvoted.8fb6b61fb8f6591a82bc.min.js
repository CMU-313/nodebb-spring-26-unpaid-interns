"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[19525,49016],{22410(A,_,l){var p,r;p=[l(91749),l(29930),l(49897)],r=(function(m,d,E){const a={};let g,f=0,c=!1,T,s=0;a.init=function(o,t){const n=$("body");typeof o=="function"?(g=o,T=n):(g=t,T=o||n),f=$(window).scrollTop(),$(window).off("scroll",h).on("scroll",h),n.height()<=$(window).height()&&(!ajaxify.data.hasOwnProperty("pageCount")||ajaxify.data.pageCount>1)&&g(1)};function h(){s&&clearTimeout(s),s=setTimeout(function(){s=0,u()},60)}function u(){if(D())return;const o=S(),t=C(o.currentScrollTop);P(o)&&g(t),f=o.currentScrollTop}function D(){const o=utils.findBootstrapEnvironment(),t=(o==="xs"||o==="sm")&&$("html").hasClass("composing");return c||t||app.flags._glance}function S(){const o=$(window).scrollTop(),t=$(window).height(),n=T.offset(),e=n?n.top:0,i=T.height()-t,v=i<=0?t:i,w=100*(o-e)/v;return{currentScrollTop:o,viewportHeight:i,scrollPercent:w}}function C(o){return o>f?1:-1}function P(o){const e=o.currentScrollTop<f,i=o.currentScrollTop>f;return!!(o.scrollPercent<15&&e||o.scrollPercent>85&&i||o.scrollPercent<0&&i&&o.viewportHeight<0)}return a.loadMore=function(o,t,n){if(c)return;c=!0;const e={method:o,data:t};m.fire("action:infinitescroll.loadmore",e),(e.method.startsWith("/")?E.get:socket.emit)(e.method,e.data,function(v,w){if(v)return c=!1,d.error(v);n(w,function(){c=!1})})},a.loadMoreXhr=function(o,t){if(c)return;c=!0;const n=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),e={url:n,data:o};m.fire("action:infinitescroll.loadmore.xhr",e),$.get(n,o,function(i){t(i,function(){c=!1})}).fail(function(i){c=!1,d.error(String(i.responseJSON||"[[error:no-connection]]"))})},a.removeExtra=function(o,t,n){let e=$();if(o.length<=n)return e;const i=o.length-n;if(t>0){const v=$(document).height(),w=$(window).scrollTop();e=o.slice(0,i).remove(),$(window).scrollTop(w+($(document).height()-v))}else e=o.slice(o.length-i).remove();return e},a}).apply(_,p),r!==void 0&&(A.exports=r)},63984(A,_,l){var p,r;p=[l(67910),l(22410),l(91749)],r=(function(m,d,E){const a={};let g,f=1;a.init=function(){m.init(),$('[component="post/content"] img:not(.not-responsive)').addClass("img-fluid"),a.handleInfiniteScroll("account/posts")},a.handleInfiniteScroll=function(s){g=s,f=ajaxify.data.pagination.currentPage,config.usePagination||d.init(c)};function c(s){if(s<0)return;const h=utils.params();f+=1,h.page=f,d.loadMoreXhr(h,function(u,D){u.posts&&u.posts.length?T(u.posts,D):D()})}function T(s,h){app.parseAndTranslate(g,"posts",{posts:s},function(u){$('[component="posts"]').append(u),u.find("img:not(.not-responsive)").addClass("img-fluid"),u.find(".timeago").timeago(),E.fire("action:posts.loaded",{posts:s}),h()})}return a}).apply(_,p),r!==void 0&&(A.exports=r)},72699(A,_,l){var p,r;p=[l(67910),l(63984)],r=(function(m,d){const E={};return E.init=function(){m.init(),$('[component="post/content"] img:not(.not-responsive)').addClass("img-fluid"),d.handleInfiniteScroll("account/downvoted")},E}).apply(_,p),r!==void 0&&(A.exports=r)}}]);
