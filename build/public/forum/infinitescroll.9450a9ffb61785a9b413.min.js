"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,49897,82858,99127],{22410(_,y,f){var g,v;g=[f(91749),f(29930),f(49897)],v=(function(w,D,x){const a={};let u,h=0,s=!1,p,m=0;a.init=function(t,c){const o=$("body");typeof t=="function"?(u=t,p=o):(u=c,p=t||o),h=$(window).scrollTop(),$(window).off("scroll",P).on("scroll",P),o.height()<=$(window).height()&&(!ajaxify.data.hasOwnProperty("pageCount")||ajaxify.data.pageCount>1)&&u(1)};function P(){m&&clearTimeout(m),m=setTimeout(function(){m=0,O()},60)}function O(){if(e())return;const t=r(),c=n(t.currentScrollTop);d(t)&&u(c),h=t.currentScrollTop}function e(){const t=utils.findBootstrapEnvironment(),c=(t==="xs"||t==="sm")&&$("html").hasClass("composing");return s||c||app.flags._glance}function r(){const t=$(window).scrollTop(),c=$(window).height(),o=p.offset(),l=o?o.top:0,i=p.height()-c,E=i<=0?c:i,T=100*(t-l)/E;return{currentScrollTop:t,viewportHeight:i,scrollPercent:T}}function n(t){return t>h?1:-1}function d(t){const l=t.currentScrollTop<h,i=t.currentScrollTop>h;return!!(t.scrollPercent<15&&l||t.scrollPercent>85&&i||t.scrollPercent<0&&i&&t.viewportHeight<0)}return a.loadMore=function(t,c,o){if(s)return;s=!0;const l={method:t,data:c};w.fire("action:infinitescroll.loadmore",l),(l.method.startsWith("/")?x.get:socket.emit)(l.method,l.data,function(E,T){if(E)return s=!1,D.error(E);o(T,function(){s=!1})})},a.loadMoreXhr=function(t,c){if(s)return;s=!0;const o=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),l={url:o,data:t};w.fire("action:infinitescroll.loadmore.xhr",l),$.get(o,t,function(i){c(i,function(){s=!1})}).fail(function(i){s=!1,D.error(String(i.responseJSON||"[[error:no-connection]]"))})},a.removeExtra=function(t,c,o){let l=$();if(t.length<=o)return l;const i=t.length-o;if(c>0){const E=$(document).height(),T=$(window).scrollTop();l=t.slice(0,i).remove(),$(window).scrollTop(T+($(document).height()-E))}else l=t.slice(t.length-i).remove();return l},a}).apply(y,g),v!==void 0&&(_.exports=v)},49897(_,y,f){f.r(y),f.d(y,{del:()=>O,get:()=>h,head:()=>s,patch:()=>m,post:()=>p,put:()=>P});var g=f(91749),v=f.n(g),w=f(33530),D=f.n(w);const x=config.relative_path+"/api/v3";async function a(e,r){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:x+e.url,typeof r=="function"){u(e).then(n=>r(null,n),n=>r(n));return}try{return await u(e)}catch(n){if(n.message==="A valid login session was not found. Please log in and try again."){const{url:d}=await(0,g.fire)("filter:admin.reauth",{url:"login"});return(0,w.confirm)("[[error:api.reauth-required]]",t=>{t&&ajaxify.go(d)})}throw n}}async function u(e){const{url:r}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,g.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const n=await fetch(r,e),{headers:d}=n;if(d.get("x-redirect"))return u({url:d.get("x-redirect"),...e});const t=d.get("content-type"),c=t&&t.startsWith("application/json");let o;if(e.method!=="HEAD"&&(c?o=await n.json():o=await n.text()),!n.ok)throw o?new Error(c?o.status.message:o):new Error(n.statusText);return c&&o&&o.hasOwnProperty("status")&&o.hasOwnProperty("response")?o.response:o}function h(e,r,n){return a({url:e+(r&&Object.keys(r).length?"?"+$.param(r):"")},n)}function s(e,r,n){return a({url:e+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"HEAD"},n)}function p(e,r,n){return a({url:e,method:"POST",data:r,headers:{"x-csrf-token":config.csrf_token}},n)}function m(e,r,n){return a({url:e,method:"PATCH",data:r,headers:{"x-csrf-token":config.csrf_token}},n)}function P(e,r,n){return a({url:e,method:"PUT",data:r,headers:{"x-csrf-token":config.csrf_token}},n)}function O(e,r,n){return a({url:e,method:"DELETE",data:r,headers:{"x-csrf-token":config.csrf_token}},n)}}}]);
