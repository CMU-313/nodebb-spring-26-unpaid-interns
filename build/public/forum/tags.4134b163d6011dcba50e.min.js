"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,49897,82858,95738,99127],{22410(P,_,f){var d,p;d=[f(91749),f(29930),f(49897)],p=(function(m,v,E){const l={};let g,i=0,o=!1,h,T=0;l.init=function(t,s){const r=$("body");typeof t=="function"?(g=t,h=r):(g=s,h=t||r),i=$(window).scrollTop(),$(window).off("scroll",x).on("scroll",x),r.height()<=$(window).height()&&(!ajaxify.data.hasOwnProperty("pageCount")||ajaxify.data.pageCount>1)&&g(1)};function x(){T&&clearTimeout(T),T=setTimeout(function(){T=0,A()},60)}function A(){if(e())return;const t=a(),s=n(t.currentScrollTop);w(t)&&g(s),i=t.currentScrollTop}function e(){const t=utils.findBootstrapEnvironment(),s=(t==="xs"||t==="sm")&&$("html").hasClass("composing");return o||s||app.flags._glance}function a(){const t=$(window).scrollTop(),s=$(window).height(),r=h.offset(),c=r?r.top:0,u=h.height()-s,y=u<=0?s:u,D=100*(t-c)/y;return{currentScrollTop:t,viewportHeight:u,scrollPercent:D}}function n(t){return t>i?1:-1}function w(t){const c=t.currentScrollTop<i,u=t.currentScrollTop>i;return!!(t.scrollPercent<15&&c||t.scrollPercent>85&&u||t.scrollPercent<0&&u&&t.viewportHeight<0)}return l.loadMore=function(t,s,r){if(o)return;o=!0;const c={method:t,data:s};m.fire("action:infinitescroll.loadmore",c),(c.method.startsWith("/")?E.get:socket.emit)(c.method,c.data,function(y,D){if(y)return o=!1,v.error(y);r(D,function(){o=!1})})},l.loadMoreXhr=function(t,s){if(o)return;o=!0;const r=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),c={url:r,data:t};m.fire("action:infinitescroll.loadmore.xhr",c),$.get(r,t,function(u){s(u,function(){o=!1})}).fail(function(u){o=!1,v.error(String(u.responseJSON||"[[error:no-connection]]"))})},l.removeExtra=function(t,s,r){let c=$();if(t.length<=r)return c;const u=t.length-r;if(s>0){const y=$(document).height(),D=$(window).scrollTop();c=t.slice(0,u).remove(),$(window).scrollTop(D+($(document).height()-y))}else c=t.slice(t.length-u).remove();return c},l}).apply(_,d),p!==void 0&&(P.exports=p)},31042(P,_,f){var d,p;d=[f(22410),f(29930)],p=(function(m,v){const E={};E.init=function(){app.enterRoom("tags"),$("#tag-search").on("input propertychange",utils.debounce(function(){if(!$("#tag-search").val().length)return l();socket.emit("topics.searchAndLoadTags",{query:$("#tag-search").val()},function(i,o){if(i)return v.error(i);g(o.tags,!0)})},250)),m.init(E.loadMoreTags)},E.loadMoreTags=function(i){i<0||!$(".tag-list").length||$("#tag-search").val()||m.loadMore("topics.loadMoreTags",{after:$(".tag-list").attr("data-nextstart")},function(o,h){o&&o.tags&&o.tags.length?(g(o.tags,!1,h),$(".tag-list").attr("data-nextstart",o.nextStart)):h()})};function l(){socket.emit("topics.loadMoreTags",{after:0},function(i,o){if(i)return v.error(i);g(o.tags,!0)})}function g(i,o,h){h=h||function(){},app.parseAndTranslate("tags","tags",{tags:i},function(T){$(".tag-list")[o?"html":"append"](T),h()})}return E}).apply(_,d),p!==void 0&&(P.exports=p)},49897(P,_,f){f.r(_),f.d(_,{del:()=>A,get:()=>i,head:()=>o,patch:()=>T,post:()=>h,put:()=>x});var d=f(91749),p=f.n(d),m=f(33530),v=f.n(m);const E=config.relative_path+"/api/v3";async function l(e,a){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:E+e.url,typeof a=="function"){g(e).then(n=>a(null,n),n=>a(n));return}try{return await g(e)}catch(n){if(n.message==="A valid login session was not found. Please log in and try again."){const{url:w}=await(0,d.fire)("filter:admin.reauth",{url:"login"});return(0,m.confirm)("[[error:api.reauth-required]]",t=>{t&&ajaxify.go(w)})}throw n}}async function g(e){const{url:a}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,d.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const n=await fetch(a,e),{headers:w}=n;if(w.get("x-redirect"))return g({url:w.get("x-redirect"),...e});const t=w.get("content-type"),s=t&&t.startsWith("application/json");let r;if(e.method!=="HEAD"&&(s?r=await n.json():r=await n.text()),!n.ok)throw r?new Error(s?r.status.message:r):new Error(n.statusText);return s&&r&&r.hasOwnProperty("status")&&r.hasOwnProperty("response")?r.response:r}function i(e,a,n){return l({url:e+(a&&Object.keys(a).length?"?"+$.param(a):"")},n)}function o(e,a,n){return l({url:e+(a&&Object.keys(a).length?"?"+$.param(a):""),method:"HEAD"},n)}function h(e,a,n){return l({url:e,method:"POST",data:a,headers:{"x-csrf-token":config.csrf_token}},n)}function T(e,a,n){return l({url:e,method:"PATCH",data:a,headers:{"x-csrf-token":config.csrf_token}},n)}function x(e,a,n){return l({url:e,method:"PUT",data:a,headers:{"x-csrf-token":config.csrf_token}},n)}function A(e,a,n){return l({url:e,method:"DELETE",data:a,headers:{"x-csrf-token":config.csrf_token}},n)}}}]);
