"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[49016],{22410(S,A,f){var m,u;m=[f(91749),f(29930),f(49897)],u=(function(w,T,C){const s={};let p,l=0,r=!1,g,c=0;s.init=function(o,t){const n=$("body");typeof o=="function"?(p=o,g=n):(p=t,g=o||n),l=$(window).scrollTop(),$(window).off("scroll",d).on("scroll",d),n.height()<=$(window).height()&&(!ajaxify.data.hasOwnProperty("pageCount")||ajaxify.data.pageCount>1)&&p(1)};function d(){c&&clearTimeout(c),c=setTimeout(function(){c=0,a()},60)}function a(){if(v())return;const o=P(),t=D(o.currentScrollTop);_(o)&&p(t),l=o.currentScrollTop}function v(){const o=utils.findBootstrapEnvironment(),t=(o==="xs"||o==="sm")&&$("html").hasClass("composing");return r||t||app.flags._glance}function P(){const o=$(window).scrollTop(),t=$(window).height(),n=g.offset(),e=n?n.top:0,i=g.height()-t,h=i<=0?t:i,E=100*(o-e)/h;return{currentScrollTop:o,viewportHeight:i,scrollPercent:E}}function D(o){return o>l?1:-1}function _(o){const e=o.currentScrollTop<l,i=o.currentScrollTop>l;return!!(o.scrollPercent<15&&e||o.scrollPercent>85&&i||o.scrollPercent<0&&i&&o.viewportHeight<0)}return s.loadMore=function(o,t,n){if(r)return;r=!0;const e={method:o,data:t};w.fire("action:infinitescroll.loadmore",e),(e.method.startsWith("/")?C.get:socket.emit)(e.method,e.data,function(h,E){if(h)return r=!1,T.error(h);n(E,function(){r=!1})})},s.loadMoreXhr=function(o,t){if(r)return;r=!0;const n=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),e={url:n,data:o};w.fire("action:infinitescroll.loadmore.xhr",e),$.get(n,o,function(i){t(i,function(){r=!1})}).fail(function(i){r=!1,T.error(String(i.responseJSON||"[[error:no-connection]]"))})},s.removeExtra=function(o,t,n){let e=$();if(o.length<=n)return e;const i=o.length-n;if(t>0){const h=$(document).height(),E=$(window).scrollTop();e=o.slice(0,i).remove(),$(window).scrollTop(E+($(document).height()-h))}else e=o.slice(o.length-i).remove();return e},s}).apply(A,m),u!==void 0&&(S.exports=u)},63984(S,A,f){var m,u;m=[f(67910),f(22410),f(91749)],u=(function(w,T,C){const s={};let p,l=1;s.init=function(){w.init(),$('[component="post/content"] img:not(.not-responsive)').addClass("img-fluid"),s.handleInfiniteScroll("account/posts")},s.handleInfiniteScroll=function(c){p=c,l=ajaxify.data.pagination.currentPage,config.usePagination||T.init(r)};function r(c){if(c<0)return;const d=utils.params();l+=1,d.page=l,T.loadMoreXhr(d,function(a,v){a.posts&&a.posts.length?g(a.posts,v):v()})}function g(c,d){app.parseAndTranslate(p,"posts",{posts:c},function(a){$('[component="posts"]').append(a),a.find("img:not(.not-responsive)").addClass("img-fluid"),a.find(".timeago").timeago(),C.fire("action:posts.loaded",{posts:c}),d()})}return s}).apply(A,m),u!==void 0&&(S.exports=u)}}]);
