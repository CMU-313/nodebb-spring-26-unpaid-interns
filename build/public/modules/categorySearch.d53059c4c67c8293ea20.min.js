"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,49897,69185,99127],{49897(A,g,s){s.r(g),s.d(g,{del:()=>p,get:()=>r,head:()=>l,patch:()=>c,post:()=>h,put:()=>C});var u=s(91749),y=s.n(u),m=s(33530),D=s.n(m);const E=config.relative_path+"/api/v3";async function o(e,n){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:E+e.url,typeof n=="function"){i(e).then(t=>n(null,t),t=>n(t));return}try{return await i(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again."){const{url:a}=await(0,u.fire)("filter:admin.reauth",{url:"login"});return(0,m.confirm)("[[error:api.reauth-required]]",f=>{f&&ajaxify.go(a)})}throw t}}async function i(e){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,u.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(n,e),{headers:a}=t;if(a.get("x-redirect"))return i({url:a.get("x-redirect"),...e});const f=a.get("content-type"),w=f&&f.startsWith("application/json");let d;if(e.method!=="HEAD"&&(w?d=await t.json():d=await t.text()),!t.ok)throw d?new Error(w?d.status.message:d):new Error(t.statusText);return w&&d&&d.hasOwnProperty("status")&&d.hasOwnProperty("response")?d.response:d}function r(e,n,t){return o({url:e+(n&&Object.keys(n).length?"?"+$.param(n):"")},t)}function l(e,n,t){return o({url:e+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},t)}function h(e,n,t){return o({url:e,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function c(e,n,t){return o({url:e,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function C(e,n,t){return o({url:e,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function p(e,n,t){return o({url:e,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}},96349(A,g,s){var u,y;u=[s(29930),s(89336),s(49897)],y=(function(m,D,E){const o={};return o.init=function(i,r){let l=r.defaultCategories||null;r=r||{},r.privilege=r.privilege||"topics:read",r.states=r.states||["watching","tracking","notwatching","ignoring"],r.cacheList=r.hasOwnProperty("cacheList")?r.cacheList:!0;let h=[];Array.isArray(r.localCategories)&&(h=r.localCategories.map(n=>({...n})),l&&(l=[...h,...l])),r.selectedCids=r.selectedCids||ajaxify.data.selectedCids||[];const c=i.find('[component="category-selector-search"]');if(!c.length)return;const C=c.parents('[component="category/dropdown"]').length>0||c.parents('[component="category-selector"]').length>0;i.on("show.bs.dropdown",function(){C&&c.removeClass("hidden");function n(){const t=c.find("input").val();t.length>1||!t&&!l?p(t,function(a){l=r.cacheList&&(l||a),e(a)}):!t&&l&&e(l)}c.on("click",function(t){t.preventDefault(),t.stopPropagation()}),c.find("input").val("").on("keyup",utils.debounce(n,300)),n()}),i.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||c.find("input").focus()}),i.on("hide.bs.dropdown",function(){C&&c.addClass("hidden"),c.off("click"),c.find("input").off("keyup")});function p(n,t){E.get("/search/categories",{search:n,query:utils.params(),parentCid:r.parentCid||0,selectedCids:r.selectedCids,privilege:r.privilege,states:r.states,showLinks:r.showLinks,localOnly:r.localOnly,hideUncategorized:r.hideUncategorized},function(a,{categories:f}){if(a)return m.error(a);t(h.concat(f))})}function e(n){const t=r.selectedCids.map(String);n.forEach(function(a){a.selected=t.includes(String(a.cid))}),app.parseAndTranslate(r.template,{categoryItems:n.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl,hideAll:r.hideAll},function(a){i.find('[component="category/list"]').html(a.find('[component="category/list"]').html()),i.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!n.length);const f=D.Dropdown.getInstance(i.find(".dropdown-toggle").get(0));f&&f.update()})}},o}).apply(g,u),y!==void 0&&(A.exports=y)}}]);
