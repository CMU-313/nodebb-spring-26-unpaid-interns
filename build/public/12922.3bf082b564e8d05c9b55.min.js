(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,12922,15794,25432,26174,34271,36159,46379,49897,52185,58540,62441,74566,88189,92332,98463,99127],{12236(I,y,a){"use strict";var m,v;m=[a(49897),a(29930)],v=(function(g,w){const c={};c.init=function(t,i){const r=t.find(".draft-icon"),n=t.attr("data-uuid");function o(){$(`[component="composer"][data-uuid="${n}"]`).length&&(i.save_id||(i.save_id=utils.generateSaveId(app.user.uid)),c.addToDraftList("available",i.save_id),c.addToDraftList("open",i.save_id),u(t,r,i))}t.on("keyup","textarea, input.handle, input.title",utils.debounce(o,1e3)),t.on("click",'input[type="checkbox"]',utils.debounce(o,1e3)),t.on("click",'[component="category/list"] [data-cid]',utils.debounce(o,1e3)),t.on("itemAdded",".tags",utils.debounce(o,1e3)),t.on("thumb.uploaded",o),r.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){const l=c.getList("open");l.length&&l.forEach(b=>c.removeFromDraftList("open",b))}),c.migrateGuest()};function x(t){return parseInt(t,10)>0?localStorage:sessionStorage}c.get=function(t){if(!t)return null;const i=t.split(":")[1],r=x(i);try{const n=r.getItem(t),o=JSON.parse(n)||null;if(!o)throw new Error(`can't parse draft json for ${t}`);return o.save_id=t,o.timestamp&&(o.timestampISO=utils.toISOString(o.timestamp)),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:o,storage:r}),o}catch{return console.warn(`[composer/drafts] Could not get draft ${t}, removing`),c.removeFromDraftList("available"),c.removeFromDraftList("open"),null}};function u(t,i,r){if(d(app.user.uid?"localStorage":"sessionStorage")&&r&&r.save_id&&t.length){const n=t.find("input.title"),o=n&&n.length&&n.val(),l=t.find("textarea").val(),b=x(app.user.uid);if(l.length||o&&o.length){const h={save_id:r.save_id,action:r.action,text:l,uuid:t.attr("data-uuid"),timestamp:Date.now()};if(r.action==="topics.post"){const P=t.find("input.tags").val();h.tags=P,h.title=o,h.cid=r.cid,h.thumbs=r.thumbs||[]}else r.action==="posts.reply"?(h.title=r.title,h.tid=r.tid,h.toPid=r.toPid):r.action==="posts.edit"&&(h.pid=r.pid,h.title=o||r.title,h.thumbs=r.thumbs||[]);app.user.uid||(h.handle=t.find("input.handle").val()),b.setItem(r.save_id,JSON.stringify(h)),$(window).trigger("action:composer.drafts.save",{storage:b,postData:r,postContainer:t}),i.toggleClass("active",!0)}else c.removeDraft(r.save_id)}}c.removeDraft=function(t){if(!t)return;c.removeFromDraftList("available",t),c.removeFromDraftList("open",t);const i=t.split(":")[1],r=x(i);r.removeItem(t),$(window).trigger("action:composer.drafts.remove",{storage:r,save_id:t})},c.getList=function(t){try{const i=localStorage.getItem(`drafts:${t}`);return JSON.parse(i)||[]}catch{return console.warn("[composer/drafts] Could not read list of available drafts"),[]}},c.addToDraftList=function(t,i){if(!d(app.user.uid?"localStorage":"sessionStorage")||!i)return;const r=c.getList(t);r.includes(i)||(r.push(i),localStorage.setItem("drafts:"+t,JSON.stringify(r)))},c.removeFromDraftList=function(t,i){if(!d(app.user.uid?"localStorage":"sessionStorage")||!i)return;const r=c.getList(t);r.includes(i)&&(r.splice(r.indexOf(i),1),localStorage.setItem("drafts:"+t,JSON.stringify(r)))},c.migrateGuest=function(){if(d("localStorage")&&app.user.uid){const t=/^composer:\d+:\d$/,i=Object.keys(sessionStorage).filter(function(o){return t.test(o)}),r=new Set([]),n=i.map(function(o){const l=o.split(":");return l[1]=app.user.uid,r.add(l.join(":")),l.join(":")});return i.forEach(function(o,l){localStorage.setItem(n[l],sessionStorage.getItem(o)),sessionStorage.removeItem(o)}),r.forEach(function(o){c.addToDraftList("available",o)}),r}},c.listAvailable=function(){return c.getList("available").map(c.get).filter(Boolean)},c.getAvailableCount=function(){return c.listAvailable().length},c.open=function(t){if(!t)return;const i=c.get(t);f(t,i)},c.loadOpen=function(){if(ajaxify.data.template.login||ajaxify.data.template.register||config.hasOwnProperty("openDraftsOnPageLoad")&&!config.openDraftsOnPageLoad)return;const t=c.getList("available"),i=c.getList("open");t.length&&t.forEach(function(r){if(!r||i.includes(r))return;const n=c.get(r);if(!n||!n.text&&!n.title){c.removeFromDraftList("available",r),c.removeFromDraftList("open",r);return}f(r,n)})};function f(t,i){const n=t.split(":")[1];parseInt(app.user.uid,10)===parseInt(n,10)&&Promise.all([a.e(20056),a.e(23662),a.e(65285),a.e(40559),a.e(449),a.e(5785),a.e(58540)]).then(function(){var o=[a(71431)];(function(l){i.action==="topics.post"?l.newTopic({save_id:i.save_id,cid:i.cid,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(i.handle),title:utils.escapeHTML(i.title),body:i.text,tags:String(i.tags||"").split(","),thumbs:i.thumbs||[]}):i.action==="posts.reply"?g.get("/topics/"+i.tid,{},function(b,h){if(b)return w.error(b);l.newReply({save_id:i.save_id,tid:i.tid,toPid:i.toPid,title:h.title,body:i.text})}):i.action==="posts.edit"&&l.editPost({save_id:i.save_id,pid:i.pid,title:i.title?utils.escapeHTML(i.title):void 0,body:i.text,thumbs:i.thumbs||[]})}).apply(null,o)}).catch(a.oe)}function d(t){var i;try{i=window[t];var r="__storage_test__";return i.setItem(r,r),i.removeItem(r),!0}catch(n){return n instanceof DOMException&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&i&&i.length!==0}}return c}).apply(y,m),v!==void 0&&(I.exports=v)},13230(I,y,a){"use strict";var m,v,g;(function(w){v=[a(53050)],m=w,g=typeof m=="function"?m.apply(y,v):m,g!==void 0&&(I.exports=g)})(function(w){const c=w("[^\\p{L}\\s\\d\\-_@.]","g"),A=/[^\w\s\d\-_@.]/g,x=/^\s+|\s+$/g,u=/\s+/g,f=/-+/g,d=/-$/g,t=/^-/g,i=/^[\w\d\s.,\-@]+$/;return function(n,o){return n?(n=String(n).replace(x,""),i.test(n)?n=n.replace(A,"-"):n=w.replace(n,c,"-"),n=o?n:n.toLocaleLowerCase(),n=n.replace(u,"-"),n=n.replace(f,"-"),n=n.replace(d,""),n=n.replace(t,""),n):""}})},24187(I,y,a){"use strict";var m,v;m=[a(64061)],v=(function(){const g={};g.show=function(u,f){const d=u.hasOwnProperty("fileSize")&&u.fileSize!==void 0?parseInt(u.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:u.hasOwnProperty("showHelp")&&u.showHelp!==void 0?u.showHelp:!0,fileSize:d,title:u.title||"[[global:upload-file]]",description:u.description||"",button:u.button||"[[global:upload]]",accept:u.accept?u.accept.replace(/,/g,"&#44; "):""},function(t){t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()});const i=t.find("#uploadForm");i.attr("action",u.route),i.find("#params").val(JSON.stringify(u.params)),t.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),i.submit()}),i.submit(function(){return w(t,d,f),!1})})},g.hideAlerts=function(u){$(u).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function w(u,f,d){c(u,"status","[[uploads:uploading-file]]"),u.find("#upload-progress-bar").css("width","0%"),u.find("#upload-progress-box").show().removeClass("hide");const t=u.find("#fileInput");if(!t.val())return c(u,"error","[[uploads:select-file-to-upload]]");if(!x(t[0],f))return c(u,"error","[[error:file-too-big, "+f+"]]");g.ajaxSubmit(u,d)}function c(u,f,d){g.hideAlerts(u),f==="error"&&u.find("#fileUploadSubmitBtn").removeClass("disabled"),d=d.replace(/&amp;#44/g,"&#44"),u.find("#alert-"+f).translateText(d).removeClass("hide")}g.ajaxSubmit=function(u,f){u.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=A(t),c(u,"error",t.responseJSON?.status?.message||t.responseJSON?.error||`[[error:upload-error-fallback, ${t.status} ${t.statusText}]]`)},uploadProgress:function(t,i,r,n){u.find("#upload-progress-bar").css("width",n+"%")},success:function(t){let i=A(t);t.hasOwnProperty("response")&&t.hasOwnProperty("status")&&t.status.code==="ok"&&(i=t.response.images),f(i[0].url),c(u,"success","[[uploads:upload-success]]"),setTimeout(function(){g.hideAlerts(u),u.modal("hide")},750)}})};function A(u){if(typeof u=="string")try{return JSON.parse(u)}catch(f){return console.error(f),{error:"[[error:parse-error]]"}}return u}function x(u,f){return window.FileReader&&f?u.files[0].size<=f*1e3:!0}return g}).apply(y,m),v!==void 0&&(I.exports=v)},29869(I){"use strict";I.exports=function(y,a,m){a.setGlobal("true",!0),a.setGlobal("false",!1);const v=1440*60*1e3,g={displayMenuItem:c,buildMetaTag:A,buildLinkTag:x,stringify:u,escape:f,stripTags:d,buildCategoryIcon:t,buildCategoryLabel:i,generateCategoryBackground:r,generateChildrenCategories:n,generateTopicClass:o,membershipBtn:l,spawnPrivilegeStates:b,localeToHTML:h,renderTopicImage:P,renderDigestAvatar:D,userAgentIcons:U,buildAvatar:k,increment:M,lessthan:K,greaterthan:H,generateWroteReplied:J,generateRepliedTo:O,generateWrote:W,encodeURIComponent:z,isoTimeToLocaleString:Y,shouldHideReplyContainer:G,humanReadableNumber:j,formattedNumber:Q,isNumber:V,txEscape:Z,uploadBasename:X,generatePlaceholderWave:q,register:_,__escape:w};function w(e){return e}function c(e,s){const p=e.navigation[s];return!(!p||p.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||p.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||p.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function A(e){const s=e.name?'name="'+e.name+'" ':"",p=e.property?'property="'+e.property+'" ':"",E=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+s+p+E+`/>
	`}function x(e){const s=["link","rel","as","type","href","hreflang","sizes","title","crossorigin"],[p,E,C,S,R,F,L,T,N]=s.map(B=>e[B]?`${B}="${e[B]}" `:"");return"<link "+p+E+C+S+L+T+R+F+N+`/>
	`}function u(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function f(e){return y.escapeHTML(e)}function d(e){return y.stripHTMLTags(e)}function t(e,s,p){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${p}" style="${r(e)} width:${s}; height: ${s}; font-size: ${parseInt(s,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function i(e,s="a",p=""){if(!e)return"";const E=s==="a"?`href="${m}/category/${e.slug}"`:"";return`<${s} component="topic/category" ${E} class="badge px-1 text-truncate text-decoration-none ${p}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important; max-width: 70vw;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</${s}>`}function r(e){if(!e)return"";const s=[];return e.bgColor&&(s.push("background-color: "+e.bgColor),s.push(`border-color: ${e.bgColor}!important`)),e.color&&s.push("color: "+e.color),e.backgroundImage&&(s.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&s.push("background-size: "+e.imageClass)),s.join("; ")+";"}function n(e){let s="";return!e||!e.children||!e.children.length||(e.children.forEach(function(p){if(p&&!p.isSection){const E=p.link?p.link:m+"/category/"+p.slug;s+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+r(p)+'"><i class="fa fa-fw '+p.icon+'"></i></div><a href="'+E+'"><small>'+p.name+"</small></a></span>"}}),s=s&&'<span class="category-children">'+s+"</span>"),s}function o(e){return["locked","pinned","deleted","unread","scheduled"].filter(p=>!!e[p]).join(" ")}function l(e,s=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${s}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${s}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success ${s}" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function b(e,s,p,E){const C=[];for(const[S,R]of Object.entries(p))C.push({name:S,state:R,type:E[S]});return C.map(function(S){const R=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],F=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],L=["groups:moderate"];let T=["groups:view:users","groups:find","groups:read","groups:topics:read","groups:topics:create","groups:topics:reply","groups:topics:tag","groups:posts:edit","groups:posts:history","groups:posts:delete","groups:posts:upvote","groups:posts:downvote","groups:topics:delete"];e===-1&&(T=T.slice(3));const N=s==="guests"&&(R.includes(S.name)||S.name.startsWith("groups:admin:"))||s==="spiders"&&!F.includes(S.name)||s==="fediverse"&&!T.includes(S.name)||s==="Global Moderators"&&L.includes(S.name);return`
				<td data-privilege="${S.name}" data-value="${S.state}" data-type="${S.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none${N?' d-none"':""}" autocomplete="off" type="checkbox"${S.state?" checked":""}${N?' disabled="disabled" aria-diabled="true"':""} />
					</div>
				</td>
			`}).join("")}function h(e,s){return e=e||s||"en-GB",e.replace("_","-")}function P(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.displayname+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.displayname+'" />'}function D(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function U(e){let s="";switch(e.platform){case"Linux":s+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":s+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":s+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":s+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":s+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":s+='<i class="fa fa-fw fa-mobile"></i>';break;default:s+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":s+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":s+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":s+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":s+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":s+='<i class="fa fa-fw fa-edge"></i>';break;default:s+='<i class="fa fa-fw fa-question-circle"></i>';break}return s}function k(e,s,p,E,C){e||(e=this),E=E||"";const S=new Map([["title",e.displayname],["data-uid",e.uid],["class",`avatar ${E}${p?" avatar-rounded":""}`]]),R=[`--avatar-size: ${s};`],F=T=>Array.from(T).reduce((N,[B,ee])=>(N+=` ${B}="${ee}"`,N),"");let L="";return e.picture&&(L+=`<img${F(S)} alt="${e.displayname}" loading="lazy" component="${C||"avatar/picture"}" src="${e.picture}" style="${R.join(" ")}" onError="this.remove()" itemprop="image" />`),L+=`<span${F(S)} component="${C||"avatar/icon"}" style="${R.join(" ")} background-color: ${e["icon:bgColor"]}">${e["icon:text"]}</span>`,L}function M(e,s){return String(e+parseInt(s,10))}function K(e,s){return parseInt(e,10)<parseInt(s,10)}function H(e,s){return parseInt(e,10)>parseInt(s,10)}function J(e,s){return e.toPid?O(e,s):W(e,s)}function O(e,s){const p=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-s*v?"on":"ago"}, ${e.toPid}, ${m}/post/${encodeURIComponent(e.toPid)}, ${p}, ${m}/post/${encodeURIComponent(e.pid)}, ${e.timestampISO}]]`}function W(e,s){return`[[topic:wrote-${e.timestamp<Date.now()-s*v?"on":"ago"}, ${m}/post/${encodeURIComponent(e.pid)}, ${e.timestampISO}]]`}function z(e){return encodeURIComponent(e)}function Y(e,s="en-GB"){return new Date(e).toLocaleString([s],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function G(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function j(e,s=1){return y.makeNumberHumanReadable(e,s)}function Q(e){return y.addCommas(e)}function V(e){return y.isNumber(e)}function Z(e){return String(e).replace(/%/g,"&#37;").replace(/,/g,"&#44;")}function X(e,s="/"){const p=/^\d+-/,E=e.substr(e.lastIndexOf(s)+1);return p.test(E)?E.slice(14):E}function q(e){return e.map(p=>p==="divider"?'<li class="dropdown-divider"></li>':`
			<li class="dropdown-item placeholder-wave">
				<div class="placeholder" style="width: 20px;"></div>
				<div class="placeholder col-${p}"></div>
			</li>`).join("")}function _(){Object.keys(g).forEach(function(e){a.registerHelper(e,g[e])})}return g}},30076(I,y,a){"use strict";var m,v;const g=a(29869);m=[a(77918),a(81335)],v=(function(w,c){return g(w,c,config.relative_path)}).apply(y,m),v!==void 0&&(I.exports=v)},36159(I,y,a){"use strict";var m,v;m=[a(49897),a(33530),a(29930),a(24187),a(81335),a(17459),a(65285)],v=(function(g,w,c,A,x,u){const f={};return f.get=d=>g.get(`/topics/${d}/thumbs`,{thumbsOnly:1}),f.delete=(d,t)=>g.del(`/topics/${d}/thumbs`,{path:t}),f.updateTopicThumbs=async d=>{const t=await f.get(d),i=await app.parseAndTranslate("partials/topic/thumbs",{thumbs:t});$('[component="topic/thumb/list"]').html(i)},f.deleteAll=d=>{f.get(d).then(t=>{Promise.all(t.map(i=>f.delete(d,i.url)))})},f.upload=()=>new Promise(d=>{A.show({title:"[[topic:composer.thumb-title]]",method:"put",route:config.relative_path+"/api/topic/thumb/upload"},function(t){d(t)})}),f.modal={},f.modal.open=function(d){const{id:t,postData:i}=d;let{modal:r}=d;const n=i.thumbs||[];return new Promise(o=>{x.render("modals/topic-thumbs",{thumbs:n}).then(l=>{r?u.translate(l,function(b){r.find(".bootbox-body").html(b),f.modal.handleSort({modal:r,thumbs:n})}):(r=w.dialog({title:"[[modules:thumbs.modal.title]]",message:l,onEscape:!0,backdrop:!0,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(f.upload().then(b=>{i.thumbs.push(b.replace(new RegExp(`^${config.upload_url}`),"")),f.modal.open({...d,modal:r}),Promise.all([a.e(20056),a.e(40559),a.e(449),a.e(5785),a.e(52185)]).then(function(){var h=[a(71431)];(P=>{P.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`)),o()}).apply(null,h)}).catch(a.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),f.modal.handleDelete({...d,modal:r}),f.modal.handleSort({modal:r,thumbs:n}))})})},f.modal.handleDelete=d=>{const t=d.modal.get(0),{id:i}=d;t.addEventListener("click",r=>{r.target.closest('button[data-action="remove"]')&&w.confirm("[[modules:thumbs.modal.confirm-remove]]",n=>{if(!n)return;const o=r.target.closest("[data-path]").getAttribute("data-path"),l=d.postData;l&&l.thumbs&&l.thumbs.includes(o)&&(l.thumbs=l.thumbs.filter(b=>b!==o),f.modal.open(d),Promise.all([a.e(20056),a.e(40559),a.e(449),a.e(5785),a.e(52185)]).then(function(){var b=[a(71431)];(h=>{h.updateThumbCount(i,$(`[component="composer"][data-uuid="${i}"]`))}).apply(null,b)}).catch(a.oe))})})},f.modal.handleSort=({modal:d,thumbs:t})=>{if(t.length>1){const i=d.find(".topic-thumbs-modal");i.sortable({items:"[data-path]"}),i.on("sortupdate",function(){if(!t)return;const r=[];i.find("[data-path]").each(function(){const n=$(this).attr("data-path"),o=t.find(l=>l===n);o&&r.push(o)}),t.length=0,Array.prototype.push.apply(t,r)})}},f}).apply(y,m),v!==void 0&&(I.exports=v)},49897(I,y,a){"use strict";a.r(y),a.d(y,{del:()=>r,get:()=>u,head:()=>f,patch:()=>t,post:()=>d,put:()=>i});var m=a(91749),v=a.n(m),g=a(33530),w=a.n(g);const c=config.relative_path+"/api/v3";async function A(n,o){if(n.url=n.url.startsWith("/api")?config.relative_path+n.url:c+n.url,typeof o=="function"){x(n).then(l=>o(null,l),l=>o(l));return}try{return await x(n)}catch(l){if(l.message==="A valid login session was not found. Please log in and try again."){const{url:b}=await(0,m.fire)("filter:admin.reauth",{url:"login"});return(0,g.confirm)("[[error:api.reauth-required]]",h=>{h&&ajaxify.go(b)})}throw l}}async function x(n){const{url:o}=n;delete n.url,n.data&&!(n.data instanceof FormData)&&(n.data=JSON.stringify(n.data||{}),n.headers["content-type"]="application/json; charset=utf-8"),{options:n}=await(0,m.fire)("filter:api.options",{options:n}),n.data&&(n.body=n.data,delete n.data);const l=await fetch(o,n),{headers:b}=l;if(b.get("x-redirect"))return x({url:b.get("x-redirect"),...n});const h=b.get("content-type"),P=h&&h.startsWith("application/json");let D;if(n.method!=="HEAD"&&(P?D=await l.json():D=await l.text()),!l.ok)throw D?new Error(P?D.status.message:D):new Error(l.statusText);return P&&D&&D.hasOwnProperty("status")&&D.hasOwnProperty("response")?D.response:D}function u(n,o,l){return A({url:n+(o&&Object.keys(o).length?"?"+$.param(o):"")},l)}function f(n,o,l){return A({url:n+(o&&Object.keys(o).length?"?"+$.param(o):""),method:"HEAD"},l)}function d(n,o,l){return A({url:n,method:"POST",data:o,headers:{"x-csrf-token":config.csrf_token}},l)}function t(n,o,l){return A({url:n,method:"PATCH",data:o,headers:{"x-csrf-token":config.csrf_token}},l)}function i(n,o,l){return A({url:n,method:"PUT",data:o,headers:{"x-csrf-token":config.csrf_token}},l)}function r(n,o,l){return A({url:n,method:"DELETE",data:o,headers:{"x-csrf-token":config.csrf_token}},l)}},74566(I,y,a){I.exports=a(12236)}}]);
