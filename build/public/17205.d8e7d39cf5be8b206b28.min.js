"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[17205,34405,38395],{16227(b,P,u){var r,f;r=[u(52473)],f=(function(d){const s={};let g;s.pids=[];let A=!1;s.init=function(e,t){s.pids.length=0,g=e,t=t||{},A=t.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',h),p()};function h(e){e.stopPropagation();const t=$(this).attr("data-pid"),c=$('[component="topic"] [data-pid="'+t+'"]');!A&&parseInt($(this).attr("data-index"),10)===0||s.togglePostSelection(c,t)}s.disable=function(){s.pids.forEach(function(e){d.get("post","pid",e).toggleClass("selected",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',h),m()},s.togglePostSelection=function(e,t){if(t){const c=s.pids.indexOf(t);c===-1?(s.pids.push(t),e.toggleClass("selected",!0)):(s.pids.splice(c,1),e.toggleClass("selected",!1)),s.pids.length&&s.pids.sort(function(i,o){return i-o}),typeof g=="function"&&g()}};function n(){return!1}function p(){$("#content").on("click",'[component="post"] button, [component="post"] a',n)}function m(){$("#content").off("click",'[component="post"] button, [component="post"] a',n)}return s}).apply(P,r),f!==void 0&&(b.exports=f)},17205(b,P,u){var r,f;r=[u(16227),u(34405),u(29930),u(49897)],f=(function(d,s,g,A){const h={};let n,p,m=0;h.init=function(a){n||app.parseAndTranslate("modals/change-owner",{},function(E){n=E,p=n.find("#change_owner_commit"),$("body").append(n),n.find("#change_owner_cancel").on("click",o),n.find("#username").on("keyup",t),d.init(c,{allowMainPostSelect:!0}),e(),a&&d.togglePostSelection(a,a.attr("data-pid")),p.on("click",function(){i()}),s.user(n.find("#username"),{filters:["notbanned"]},function(y,l){m=l.item.user.uid,t()})})};function e(){d.pids.length?n.find("#pids").translateHtml("[[topic:fork-pid-count, "+d.pids.length+"]]"):n.find("#pids").translateHtml("[[topic:fork-no-pids]]")}function t(){m&&n.find("#username").length&&n.find("#username").val().length&&d.pids.length?p.removeAttr("disabled"):p.attr("disabled",!0)}function c(){t(),e()}function i(){m&&A.post("/posts/owner",{pids:d.pids,uid:m}).then(()=>{ajaxify.go(`/post/${d.pids[0]}`),o()}).catch(g.error)}function o(){n&&(n.remove(),n=null,d.disable())}return h}).apply(P,r),f!==void 0&&(b.exports=f)},34405(b,P,u){var r,f;r=[u(49897),u(29930),u(36e3),u(9787),u(35786)],f=(function(d,s,{Textcomplete:g},{TextareaEditor:A},{ContenteditableEditor:h}){const n={},p={delay:200,appendTo:null};n.init=e=>{const t={...p,...e},{input:c,onSelect:i}=t;app.loadJQueryUI(function(){c.autocomplete({...t,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(o,a){m(c,i,o,a)}})})},n.user=function(e,t,c){typeof t=="function"&&(c=t,t={}),t=t||{},n.init({input:e,onSelect:c,source:(i,o)=>{t.query=i.term,d.get("/api/users",t,function(a,E){if(a)return s.error(a);if(E&&E.users){const y=E.users.map(function(l){const C=$("<div></div>").html(l.username).text();return l&&{label:C,value:C,user:{uid:l.uid,name:l.username,slug:l.userslug,username:l.username,userslug:l.userslug,displayname:l.displayname,picture:l.picture,banned:l.banned,"icon:text":l["icon:text"],"icon:bgColor":l["icon:bgColor"]}}});o(y)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},n.group=function(e,t){n.init({input:e,onSelect:t,source:(c,i)=>{socket.emit("groups.search",{query:c.term},function(o,a){if(o)return s.error(o);if(a&&a.length){const E=a.map(function(y){return y&&{label:y.name,value:y.name,group:y}});i(E)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},n.tag=function(e,t){n.init({input:e,onSelect:t,delay:100,source:(c,i)=>{socket.emit("topics.autocompleteTags",{query:c.term,cid:ajaxify.data.cid||0},function(o,a){if(o)return s.error(o);a&&i(a),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function m(e,t,c,i){t=t||function(){};const o=jQuery.Event("keypress");o.which=13,o.keyCode=13,setTimeout(function(){e.trigger(o)},100),t(c,i)}return n.setup=function({element:e,strategies:t,options:c}){const i=e.get(0);if(i){var o;if(i.nodeName==="TEXTAREA"||i.nodeName==="INPUT"?o=new A(i):i.nodeName==="DIV"&&i.getAttribute("contenteditable")==="true"&&(o=new h(i)),!o)throw new Error("unknown target element type");i.setAttribute("dir",document.querySelector("html").getAttribute("data-dir"));var a=new g(o,t,{dropdown:c});return a.on("rendered",function(){a.dropdown.items.length&&a.dropdown.items[0].activate()}),a}},n}).apply(P,r),f!==void 0&&(b.exports=f)}}]);
